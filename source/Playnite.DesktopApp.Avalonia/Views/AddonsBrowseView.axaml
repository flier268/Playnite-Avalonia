<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:conv="clr-namespace:Playnite.DesktopApp.Avalonia.Converters"
             x:Class="Playnite.DesktopApp.Avalonia.Views.AddonsBrowseView">
  <UserControl.Resources>
    <conv:StringNotEmptyConverter x:Key="StringNotEmptyConverter" />
  </UserControl.Resources>
  <StackPanel Spacing="10">
    <TextBlock Text="{Binding Header}" Foreground="{DynamicResource ShellTextBrush}" FontSize="20" />
    <TextBlock Text="{Binding Description}" Foreground="{DynamicResource ShellMutedTextBrush}" TextWrapping="Wrap" />

    <TextBlock Text="{Binding Status}"
               Foreground="{DynamicResource ShellMutedTextBrush}"
               IsVisible="{Binding Status, Converter={StaticResource StringNotEmptyConverter}}"
               TextWrapping="Wrap" />

    <Border Background="{DynamicResource ShellCardBrush}" Padding="12" CornerRadius="6">
      <StackPanel Spacing="8">
        <TextBlock Text="Local package folder" Foreground="{DynamicResource ShellTextBrush}" FontWeight="Bold" />
        <TextBox Text="{Binding BrowsePath}" IsReadOnly="True" />
        <StackPanel Orientation="Horizontal" Spacing="10">
          <Button Content="Choose folder" Command="{Binding ChooseFolderCommand}" />
          <Button Content="Refresh" Command="{Binding RefreshCommand}" />
          <Button Content="Install selected" Command="{Binding InstallSelectedCommand}" />
        </StackPanel>

        <ListBox ItemsSource="{Binding Packages}" SelectedItem="{Binding SelectedPackage}">
          <ListBox.ItemTemplate>
            <DataTemplate>
              <Border Background="{DynamicResource ShellContentBrush}" BorderBrush="{DynamicResource ShellDividerBrush}" BorderThickness="1" Padding="8" Margin="0,0,0,6" CornerRadius="4">
                <StackPanel Spacing="2">
                  <TextBlock Text="{Binding Manifest.Name}" Foreground="{DynamicResource ShellTextBrush}" />
                  <TextBlock Text="{Binding Manifest.Kind, StringFormat=Kind: {0}}" Foreground="{DynamicResource ShellMutedTextBrush}" FontSize="12" />
                  <TextBlock Text="{Binding Manifest.Version, StringFormat=Version: {0}}" Foreground="{DynamicResource ShellMutedTextBrush}" FontSize="12" />
                  <TextBlock Text="{Binding Manifest.Id, StringFormat=Id: {0}}" Foreground="{DynamicResource ShellMutedTextBrush}" FontSize="12" />
                  <TextBlock Text="{Binding IsInstalled, StringFormat=Already installed: {0}}" Foreground="{DynamicResource ShellMutedTextBrush}" FontSize="12" />
                  <TextBlock Text="{Binding PackagePath, StringFormat=File: {0}}" Foreground="{DynamicResource ShellMutedTextBrush}" FontSize="12" />
                </StackPanel>
              </Border>
            </DataTemplate>
          </ListBox.ItemTemplate>
        </ListBox>
      </StackPanel>
    </Border>
  </StackPanel>
</UserControl>
