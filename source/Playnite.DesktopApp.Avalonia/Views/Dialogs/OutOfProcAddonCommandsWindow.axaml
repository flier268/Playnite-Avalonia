<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:conv="clr-namespace:Playnite.DesktopApp.Avalonia.Converters"
        x:Class="Playnite.DesktopApp.Avalonia.Views.Dialogs.OutOfProcAddonCommandsWindow"
        Width="760"
        Height="540"
        MinWidth="560"
        MinHeight="360"
        Background="{DynamicResource ShellContentBrush}"
        WindowStartupLocation="CenterOwner"
        CanResize="True">
  <Window.Resources>
    <conv:StringNotEmptyConverter x:Key="StringNotEmptyConverter" />
  </Window.Resources>

  <Grid RowDefinitions="Auto,Auto,*,Auto" Margin="16">
    <TextBlock Text="{Binding Title}"
               FontSize="18"
               FontWeight="SemiBold"
               Foreground="{DynamicResource ShellTextBrush}"
               Margin="0,0,0,12" />

    <TextBlock Grid.Row="1"
               Text="{Binding Status}"
               Foreground="{DynamicResource ShellMutedTextBrush}"
               IsVisible="{Binding Status, Converter={StaticResource StringNotEmptyConverter}}"
               Margin="0,0,0,12" />

    <Border Grid.Row="2"
            Background="{DynamicResource ShellCardBrush}"
            BorderBrush="{DynamicResource ShellItemBorderBrush}"
            BorderThickness="1"
            CornerRadius="6"
            Padding="8"
            Margin="0,0,0,12">
      <Grid RowDefinitions="Auto,*" ColumnDefinitions="Auto,*">
        <StackPanel Orientation="Horizontal" Spacing="8" Grid.ColumnSpan="2" Margin="0,0,0,8">
          <Button Content="Refresh" Command="{Binding RefreshCommand}" />
          <Button Content="Run selected" Command="{Binding RunSelectedCommand}" IsEnabled="{Binding CanRun}" />
        </StackPanel>

        <ListBox Grid.Row="1"
                 ItemsSource="{Binding Commands}"
                 SelectedItem="{Binding SelectedCommand}"
                 Width="260"
                 Background="Transparent"
                 BorderThickness="0" />

        <Border Grid.Row="1" Grid.Column="1"
                Background="{DynamicResource ShellContentBrush}"
                BorderBrush="{DynamicResource ShellDividerBrush}"
                BorderThickness="1"
                CornerRadius="4"
                Padding="8"
                Margin="12,0,0,0">
          <StackPanel Spacing="4">
            <TextBlock Text="{Binding SelectedCommand.Name}" Foreground="{DynamicResource ShellTextBrush}" FontWeight="SemiBold" />
            <TextBlock Text="{Binding SelectedCommand.Description}" Foreground="{DynamicResource ShellMutedTextBrush}" TextWrapping="Wrap" />
            <TextBlock Text="{Binding SelectedCommand.Id, StringFormat=Id: {0}}" Foreground="{DynamicResource ShellMutedTextBrush}" FontSize="12" />
          </StackPanel>
        </Border>
      </Grid>
    </Border>

    <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Spacing="8">
      <Button Content="Close" Click="OnCloseClick" IsDefault="True" />
    </StackPanel>
  </Grid>
</Window>

