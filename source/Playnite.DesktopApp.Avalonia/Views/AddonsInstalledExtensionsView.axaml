<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:conv="clr-namespace:Playnite.DesktopApp.Avalonia.Converters"
             x:Class="Playnite.DesktopApp.Avalonia.Views.AddonsInstalledExtensionsView">
  <UserControl.Resources>
    <conv:StringNotEmptyConverter x:Key="StringNotEmptyConverter" />
  </UserControl.Resources>
  <StackPanel Spacing="10">
    <TextBlock Text="{Binding Header}" Foreground="{DynamicResource ShellTextBrush}" FontSize="20" />
    <TextBlock Text="{Binding Description}" Foreground="{DynamicResource ShellMutedTextBrush}" TextWrapping="Wrap" />

    <TextBlock Text="{Binding Status}"
               Foreground="{DynamicResource ShellMutedTextBrush}"
               IsVisible="{Binding Status, Converter={StaticResource StringNotEmptyConverter}}"
               TextWrapping="Wrap" />

    <Border Background="{DynamicResource ShellCardBrush}" Padding="12" CornerRadius="6">
      <StackPanel Spacing="8">
        <StackPanel Orientation="Horizontal" Spacing="10">
          <Button Content="Install from file" Command="{Binding InstallFromFileCommand}" />
          <Button Content="Refresh" Command="{Binding RefreshCommand}" />
          <Button Content="Enable/Disable selected" Command="{Binding ToggleEnabledCommand}" />
          <Button Content="Restart (OutOfProc)" Command="{Binding RestartOutOfProcCommand}" IsEnabled="{Binding CanManageOutOfProc}" />
          <Button Content="View log (OutOfProc)" Command="{Binding ViewOutOfProcLogCommand}" IsEnabled="{Binding CanManageOutOfProc}" />
          <Button Content="Copy status (OutOfProc)" Command="{Binding CopyOutOfProcStatusCommand}" IsEnabled="{Binding CanManageOutOfProc}" />
          <Button Content="Commands (OutOfProc)" Command="{Binding ViewOutOfProcCommandsCommand}" IsEnabled="{Binding CanManageOutOfProc}" />
          <Button Content="Uninstall selected" Command="{Binding UninstallCommand}" />
        </StackPanel>

        <ListBox ItemsSource="{Binding Addons}" SelectedItem="{Binding SelectedAddon}">
          <ListBox.ItemTemplate>
            <DataTemplate>
              <Border Background="{DynamicResource ShellContentBrush}" BorderBrush="{DynamicResource ShellDividerBrush}" BorderThickness="1" Padding="8" Margin="0,0,0,6" CornerRadius="4">
                <StackPanel Spacing="2">
                  <TextBlock Text="{Binding Manifest.Name}" Foreground="{DynamicResource ShellTextBrush}" />
                  <TextBlock Text="{Binding Manifest.Author, StringFormat=Author: {0}}" Foreground="{DynamicResource ShellMutedTextBrush}" FontSize="12" />
                  <TextBlock Text="{Binding Manifest.Version, StringFormat=Version: {0}}" Foreground="{DynamicResource ShellMutedTextBrush}" FontSize="12" />
                  <TextBlock Text="{Binding Manifest.Id, StringFormat=Id: {0}}" Foreground="{DynamicResource ShellMutedTextBrush}" FontSize="12" />
                  <TextBlock Text="{Binding Disabled, StringFormat=Disabled: {0}}" Foreground="{DynamicResource ShellMutedTextBrush}" FontSize="12" />
                  <TextBlock Text="{Binding OutOfProcStatusText}"
                             Foreground="{DynamicResource ShellMutedTextBrush}"
                             FontSize="12"
                             IsVisible="{Binding OutOfProcStatusText, Converter={StaticResource StringNotEmptyConverter}}" />
                </StackPanel>
              </Border>
            </DataTemplate>
          </ListBox.ItemTemplate>
        </ListBox>
      </StackPanel>
    </Border>
  </StackPanel>
</UserControl>
